<!-- <section>
<h2>Emotional Suggestions</h2>
<% if (!items.length) { %>
<p>No suggestions yet.</p>
<% } %>
<% items.forEach(it => { %>
<article class="card">
<h3><%= it.mood %></h3>
<ol>
<% it.suggestions.forEach(s => { %>
<li><%= s %></li>
<% }) %>
</ol>
</article>
<% }) %>
</section> -->


<section>
  <h2>Emotional Suggestions</h2>

  <!-- Mood Buttons -->
  <div class="mood-buttons">
    <button class="btn mood-btn" data-mood="happy">ðŸ˜Š Happy</button>
    <button class="btn mood-btn" data-mood="sad">ðŸ˜¢ Sad</button>
    <button class="btn mood-btn" data-mood="anxiety">ðŸ˜Ÿ Anxiety</button>
    <button class="btn mood-btn" data-mood="angry">ðŸ˜¡ Angry</button>
    <button class="btn mood-btn" data-mood="stressed">ðŸ˜£ Stressed</button>
    <button class="btn mood-btn" data-mood="motivated">ðŸ’ª Motivated</button>
  </div>

  <% if (!items.length) { %>
    <p>No suggestions yet.</p>
  <% } %>

  <div id="randomSuggestion" class="card hidden">
    <h3 id="selectedMood"></h3>
    <p id="suggestionText"></p>
  </div>
</section>

<!-- Safe JSON embedding -->
<script id="moodData" type="application/json">
  <%- JSON.stringify(items.map(item => ({
        mood: item.mood.trim().toLowerCase(),
        suggestions: item.suggestions || []
  }))) %>
</script>

<script>
  // Parse safely from script tag
  const moodData = JSON.parse(document.getElementById('moodData').textContent);

  const buttons = document.querySelectorAll('.mood-btn');
  const randomBox = document.getElementById('randomSuggestion');
  const moodTitle = document.getElementById('selectedMood');
  const suggestionText = document.getElementById('suggestionText');

  buttons.forEach(btn => {
    btn.addEventListener('click', () => {
      const mood = btn.dataset.mood.toLowerCase().trim();
      const moodItem = moodData.find(m => m.mood === mood);

      if (moodItem && moodItem.suggestions.length > 0) {
        const randomSuggestion = moodItem.suggestions[Math.floor(Math.random() * moodItem.suggestions.length)];

        moodTitle.textContent = mood.charAt(0).toUpperCase() + mood.slice(1);
        suggestionText.textContent = randomSuggestion;

        randomBox.classList.remove('hidden');
        randomBox.classList.add('fade-in');
        setTimeout(() => randomBox.classList.remove('fade-in'), 500);
      } else {
        moodTitle.textContent = mood.charAt(0).toUpperCase() + mood.slice(1);
        suggestionText.textContent = "No suggestions available for this mood.";
        randomBox.classList.remove('hidden');
      }
    });
  });
</script>


<style>
  .mood-buttons {
    display: flex;
    flex-wrap: wrap;
    gap: 0.75rem;
    margin-bottom: 1rem;
    justify-content: center;
  }

  .mood-btn {
    padding: 1rem 2rem;
    border: none;
    background: #007bff;
    color: #fff;
    font-weight: 600;
    font-size: 1.2rem;           
    border-radius: 12px;         
    cursor: pointer;
    min-width: 120px;            
    transition: background 0.3s, transform 0.2s;
  }

  .mood-btn:hover {
    background: #0056b3;
    transform: scale(1.08);
  }

  .hidden {
    display: none;
  }

  .card {
    background: #f8f9fa;
    border-radius: 12px;
    padding: 1.2rem;
    margin-top: 1rem;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    text-align: center;
    max-width: 600px;
    margin-left: auto;
    margin-right: auto;
  }

  .card h3 {
    margin-bottom: 0.6rem;
    font-size: 1.3rem;
  }

  .card p {
    font-size: 1.05rem;
    color: #333;
  }

  /* Fade-in animation */
  .fade-in {
    animation: fadeIn 0.5s ease-in-out;
  }

  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
  }
</style>
